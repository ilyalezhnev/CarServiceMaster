(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{134:function(e,a,t){"use strict";var r=t(0),n=t.n(r),c=t(92),s=t(38),l=(t(169),t(54)),o=t(29),u=t(120),i=t(64),m=t(108),d=t(35),p=t.n(d),b=t(49),E=t(31),g=t(25),j=t(40),f=t.n(j);var h={login:e=>f.a.post("".concat("/api/auth","/login"),e)};const P=Object(l.a)()({state:{isAuth:!1,errors:null},reducers:{login:e=>Object(E.a)(Object(E.a)({},e),{},{isAuth:!0}),logout:e=>Object(E.a)(Object(E.a)({},e),{},{isAuth:!1})},effects:e=>({onLogin:a=>Object(b.a)(p.a.mark((function t(){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.login(a);case 2:r=t.sent,(n=r.data).succces&&(localStorage.setItem("jwtToken",n.token),e.auth.login());case 5:case"end":return t.stop()}}),t)})))(),onLogout:()=>Object(b.a)(p.a.mark((function a(){return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:localStorage.removeItem("jwtToken"),e(Object(g.d)("/")),e.auth.logout();case 3:case"end":return a.stop()}}),a)})))()})});var v=t(138);const O="/api/admin/carparts";var w={getCarParts:()=>f.a.get(O),addCarParts:e=>f.a.post(O,e),updateCarParts:e=>{let a=e.id,t=Object(v.a)(e,["id"]);return f.a.put("".concat(O,"/").concat(a),t)}};var y={auth:P,carParts:Object(l.a)()({state:{data:null},reducers:{setCarParts:(e,a)=>Object(E.a)(Object(E.a)({},e),{},{data:a})},effects:e=>({getCarParts:()=>Object(b.a)(p.a.mark((function a(){var t,r;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,w.getCarParts();case 2:t=a.sent,(r=t.data)&&e.carParts.setCarParts(r);case 5:case"end":return a.stop()}}),a)})))(),addCarParts:a=>Object(b.a)(p.a.mark((function t(){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.addCarParts(a);case 2:r=t.sent,(n=r.data)&&e.carParts.setCarParts(n);case 5:case"end":return t.stop()}}),t)})))(),updateCarParts:a=>Object(b.a)(p.a.mark((function t(){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.updateCarParts(a);case 2:r=t.sent,(n=r.data)&&e.carParts.setCarParts(n);case 5:case"end":return t.stop()}}),t)})))()})})};const k=Object(o.a)(),C=Object(u.a)({asNumber:!1}),I=Object(i.b)(k),L=Object(l.b)({plugins:[C],models:y,redux:{rootReducers:{resetStore:()=>{}},middlewares:[Object(m.a)(k)],reducers:{router:I}}});var x=t(15),F=t(121),N=t(242),S=t(243),T=t(246),q=t(247),z=t(135);var A=Object(s.c)((e=>({})),(e=>({onLogin:e.auth.onLogin})))((({onLogin:e})=>n.a.createElement(N.a,{justify:"center",align:"middle",className:"login-wrapper"},n.a.createElement(S.a,{span:10},n.a.createElement(T.a,{layout:"vertical",name:"basic",initialValues:{remember:!0},onFinish:a=>{e(Object(E.a)({},a))},onFinishFailed:e=>{console.log("Failed:",e)}},n.a.createElement(T.a.Item,{label:"\u041b\u043e\u0433\u0438\u043d",name:"login",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d"}]},n.a.createElement(q.a,null)),n.a.createElement(T.a.Item,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"}]},n.a.createElement(q.a.Password,null)),n.a.createElement(T.a.Item,null,n.a.createElement(z.a,{type:"primary",htmlType:"submit"},"Submit"))))))),G=t(81),J=t(244),R=t(248);var V=Object(s.c)((e=>({carParts:e.carParts.data})),(e=>({getCarParts:e.carParts.getCarParts,addCarParts:e.carParts.addCarParts,updateCarParts:e.carParts.updateCarParts})))((({carParts:e,getCarParts:a,addCarParts:t,updateCarParts:c})=>{Object(r.useEffect)((()=>{a()}),[]);const s=T.a.useForm(),l=Object(G.a)(s,1)[0];n.a.useEffect((()=>{l.setFieldsValue({title:e&&e.title,subtitle:e&&e.subtitle})}),[e]);return n.a.createElement(N.a,{justify:"center",align:"middle",className:"login-wrapper"},n.a.createElement(S.a,{span:10},n.a.createElement(T.a,{form:l,layout:"vertical",name:"basic",onFinish:a=>{e?c(Object(E.a)(Object(E.a)({},a),{},{id:e.id})):t(a)},onFinishFailed:e=>{console.log("Failed:",e)}},n.a.createElement(T.a.Item,{label:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",name:"title",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a"}]},n.a.createElement(q.a,null)),n.a.createElement(T.a.Item,{label:"\u041f\u043e\u0434\u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",name:"subtitle",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u0434\u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a"}]},n.a.createElement(q.a,null)),n.a.createElement(T.a.Item,null,n.a.createElement(z.a,{type:"primary",htmlType:"submit"},"Submit")))))}));const B=J.a.Header,D=J.a.Content;var H=({onLogout:e})=>{const a=Object(r.useState)("1"),t=Object(G.a)(a,2),c=t[0],s=t[1];return n.a.createElement(J.a,{className:"layout"},n.a.createElement(B,null,n.a.createElement("div",{className:"logo"}),n.a.createElement(R.a,{theme:"dark",mode:"horizontal",selectedKeys:[c],onClick:e=>{s(e.key)}},n.a.createElement(R.a.Item,{key:"1"},"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"),n.a.createElement(R.a.Item,{key:"2"},"\u0423\u0441\u043b\u0443\u0433\u0438"),n.a.createElement(R.a.Item,{key:"3"},"\u0417\u0430\u043f\u0447\u0430\u0441\u0442\u0438"),n.a.createElement(R.a.Item,{key:"4"},"\u042e\u0440.\u043b\u0438\u0446\u0430\u043c"),n.a.createElement(R.a.Item,{key:"5"},"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"),n.a.createElement(R.a.Item,{key:"6"},"\u0410\u043a\u0446\u0438\u0438"),n.a.createElement(R.a.Item,{key:"7"},"\u0412\u044b\u0445\u043e\u0434"))),n.a.createElement(D,null,n.a.createElement(N.a,{justify:"space-around",align:"middle"},n.a.createElement(S.a,{span:22},n.a.createElement("div",{className:"site-layout-content"},(()=>{switch(c){case"1":return n.a.createElement("div",null,"1");case"2":return n.a.createElement("div",null,"2");case"3":return n.a.createElement(V,null);case"4":return n.a.createElement("div",null,"4");case"5":return n.a.createElement("div",null,"5");case"6":return n.a.createElement("div",null,"6");case"7":return e(),null;default:return null}})())))))},K=t(245);var U=({loading:e})=>n.a.createElement("div",{className:"spiner"},n.a.createElement(K.a,{size:"large",spinning:e,className:"spiner_center"}));var _=Object(s.c)((e=>({onGlobalLoading:e.loading.global})),(e=>({onLogin:e.auth.onLogin,onLogout:e.auth.onLogout})))((({onGlobalLoading:e,onLogout:a})=>{let t=!1;if(localStorage.jwtToken){const e=Object(F.a)(localStorage.jwtToken),a=Date.now()/1e3;e&&e.exp&&e.exp>a&&(t=!0)}return n.a.createElement(n.a.Fragment,null,n.a.createElement(N.a,{justify:"space-around",className:"main-wrapper"},n.a.createElement(S.a,{span:24},n.a.createElement(x.c,null,!t&&n.a.createElement(x.a,{exact:!0,path:"*",component:A}),t&&n.a.createElement(x.a,{path:"/",render:()=>n.a.createElement(H,{onLogout:a})})))),e&&n.a.createElement(U,{loading:e}))}));a.a=()=>n.a.createElement(s.a,{store:L},n.a.createElement(c.a,null,n.a.createElement(i.a,{history:k},n.a.createElement(_,null))))},140:function(e,a,t){"use strict";t.r(a),function(e){var a=t(0),r=t.n(a),n=t(23),c=t.n(n),s=t(40),l=t.n(s),o=(t(163),t(164),t(134)),u=t(139);e&&(l.a.defaults.baseURL="http://ptzmaster.ru"),l.a.interceptors.request.use((e=>(e.headers.Authorization=localStorage.getItem("jwtToken"),e))),l.a.interceptors.response.use((e=>e),(e=>{const a=e.response;if(a&&a.data&&a.status)switch(a.status){case 422:u.b.error(a.data.error);break;case 500:u.b.error("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u043a \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0443")}return Promise.reject(e.response)})),c.a.render(r.a.createElement(o.a,null),document.getElementById("root"))}.call(this,t(88))},164:function(e,a,t){},169:function(e,a,t){}},[[140,1,2]]]);
//# sourceMappingURL=main.b5bca05c.chunk.js.map